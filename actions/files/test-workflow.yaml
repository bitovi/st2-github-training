
version: 1.0

input:
  - user
  - repo
  - path

vars:
  - create_file: ""

tasks:
  publish_message:     
    action: core.noop
    next:
      - when: <% succeeded() %>
        publish:
          - message: "Stackstorm training message has been received"
        do: notify

  notify:
    action: core.echo
    input:
      message: |
        "{{ ctx().message }}"
    next:
      - when: <% succeeded() %>
        do: create_file

  create_file:
    action: core.local
    input:
      cmd: "sudo touch training.txt"